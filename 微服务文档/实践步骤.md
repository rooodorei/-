### 实践步骤

1. PPT
2. 环境准备
3. bwic-svc
   * Maven
   * Spring
   * Test Controller
---  

QA1

---
4. bwic-svc service 层注入，返回Client。
---

QA2

---
5. client-svc  
`server.port=8081`
5. client-svc 返回 client 对象
---

QA3

---
6. bwic-svc 调用 client-svc
    * RestTemplate
---

QA4

---
7. 注册中心
* 加依赖
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>
</dependency>
```
* 加注解
```java
@EnableEurekaServer 
```
* 加配置
```yaml
spring:
  application:
    name: register-center-svc
server:
  port: 8082
eureka:
#  server:
#    responseCacheUpdateInvervalMs: 2000
#    enableSelfPreservation: false
  instance:
    hostname: 127.0.0.1
  client:
    registerWithEureka: false
    fetchRegistry: false
    serviceUrl:
      defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/
```

Eureka Server URL：http://localhost:8082/

---

QA5

---
8. client-svc 注册
* 加依赖
```xml
<properties>
   <java.version>21</java.version>
   <spring-cloud.version>2024.0.0</spring-cloud.version>
</properties>
...
<dependency>
<groupId>org.springframework.cloud</groupId>
<artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
</dependency>
...
<dependencyManagement>
<dependencies>
   <dependency>
      <groupId>org.springframework.cloud</groupId>
      <artifactId>spring-cloud-dependencies</artifactId>
      <version>${spring-cloud.version}</version>
      <type>pom</type>
      <scope>import</scope>
   </dependency>
</dependencies>
</dependencyManagement>
```

* 加注解
```java
@EnableDiscoveryClient
```

* 加配置
```yaml
server:
   port:
      8081
spring:
   application:
      name: client-svc
eureka:
   client:
      registerWithEureka: true
      fetchRegistry: false
      service-url:
         defaultZone: http://localhost:8082/eureka
```

检查 Eureka Server URL：http://localhost:8082/
、
---

QA6 （可选）

---

9. bwic-svc 注册
++
```java
@Bean
@LoadBalanced
public RestTemplate restTemplate() {
   return new RestTemplate();
}
```
---

QA7

---

10. 注册另一个 client-svc 8083

---

QA8

---
